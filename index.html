
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sunrise, Sunset, and Daylight â€¢ Saranac Lake vs Madison</title>
<style>
    body { font-family: Arial, sans-serif; background-color: #0d1117; color: #c9d1d9; margin: 0; padding: 0; }
    h1 { text-align: center; padding: 20px; }
    .container { max-width: 1000px; margin: auto; padding: 20px; }
    .date-picker { text-align: center; margin-bottom: 20px; }
    input[type="date"], button { margin: 5px; padding: 5px 10px; font-size: 1rem; }
    .timeline { margin: 20px 0; padding: 10px; background: #161b22; border-radius: 8px; }
    .track { margin: 10px 0; position: relative; height: 40px; background: #21262d; border-radius: 5px; overflow: hidden; }
    .label { position: absolute; left: -100px; top: 10px; font-weight: bold; width: 90px; text-align: right; }
    .bar { position: absolute; top: 0; height: 100%; border-radius: 5px; }
    .saranac { background: #58a6ff; }
    .madison { background: #a5d6a7; }
    .marker { position: absolute; top: -20px; font-size: 0.8rem; white-space: nowrap; }
    .differences { display: flex; justify-content: space-around; margin-top: 20px; flex-wrap: wrap; }
    .card { background: #161b22; padding: 15px; border-radius: 8px; margin: 10px; flex: 1; min-width: 200px; text-align: center; }
    .footer { text-align: center; font-size: 0.8rem; color: #8b949e; margin-top: 20px; }
</style>
</head>
<body>
    <h1>Sunrise, Sunset, and Daylight â€¢ Saranac Lake vs Madison</h1>
    <div class="container">
        <div class="date-picker">
            <input type="date" id="dateInput">
            <button onclick="setDate('today')">Today</button>
            <button onclick="setDate('tomorrow')">Tomorrow</button>
            <button onclick="setDate('yesterday')">Yesterday</button>
        </div>
        <div class="timeline" id="timeline"></div>
        <div class="differences">
            <div class="card" id="diffSunrise"></div>
            <div class="card" id="diffSunset"></div>
            <div class="card" id="diffLength"></div>
        </div>
        <div class="footer">
            Times shown in America/New_York. Solar math adapted from SunCalc by Vladimir Agafonkin, MIT License.
        </div>
    </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/suncalc/1.9.0/suncalc.min.js"></script>
<script>
const TZ = "America/New_York";
const locA = { name: "Saranac Lake, NY", lat: 44.324, lon: -74.131, color: "saranac" };
const locB = { name: "Madison, OH", lat: 41.772, lon: -81.049, color: "madison" };

function minutesSinceTZMidnight(date, tz){
    const parts = new Intl.DateTimeFormat('en-US', {
        timeZone: tz, hourCycle:'h23', hour:'2-digit', minute:'2-digit'
    }).formatToParts(date);
    let h=0, m=0;
    for (const p of parts){ if (p.type==='hour') h=+p.value; if (p.type==='minute') m=+p.value; }
    return h*60 + m;
}

function diffWithinTZDay(aDate, bDate, tz){
    return minutesSinceTZMidnight(aDate, tz) - minutesSinceTZMidnight(bDate, tz);
}

function update(date){
    const timesA = SunCalc.getTimes(date, locA.lat, locA.lon);
    const timesB = SunCalc.getTimes(date, locB.lat, locB.lon);
    const sunriseA = timesA.sunrise, sunsetA = timesA.sunset;
    const sunriseB = timesB.sunrise, sunsetB = timesB.sunset;

    const riseDiff = diffWithinTZDay(sunriseA, sunriseB, TZ);
    const setDiff = diffWithinTZDay(sunsetA, sunsetB, TZ);
    const lenA = diffWithinTZDay(sunsetA, sunriseA, TZ);
    const lenB = diffWithinTZDay(sunsetB, sunriseB, TZ);
    const lenDiff = lenA - lenB;

    const timeline = document.getElementById("timeline");
    timeline.innerHTML = "";
    [ [locA, sunriseA, sunsetA, lenA], [locB, sunriseB, sunsetB, lenB] ].forEach(([loc, rise, set, len])=>{
        const track = document.createElement("div");
        track.className = "track";
        const label = document.createElement("div");
        label.className = "label";
        label.textContent = loc.name;
        track.appendChild(label);
        const bar = document.createElement("div");
        bar.className = "bar " + loc.color;
        const startMin = minutesSinceTZMidnight(rise, TZ);
        const durMin = len;
        bar.style.left = (startMin/1440*100) + "%";
        bar.style.width = (durMin/1440*100) + "%";
        track.appendChild(bar);
        const riseMark = document.createElement("div");
        riseMark.className = "marker";
        riseMark.style.left = (startMin/1440*100) + "%";
        riseMark.textContent = "ðŸŒ… " + rise.toLocaleTimeString('en-US',{timeZone:TZ,hour:'numeric',minute:'2-digit'});
        track.appendChild(riseMark);
        const setMark = document.createElement("div");
        setMark.className = "marker";
        setMark.style.left = ((startMin+durMin)/1440*100) + "%";
        setMark.textContent = "ðŸŒ‡ " + set.toLocaleTimeString('en-US',{timeZone:TZ,hour:'numeric',minute:'2-digit'});
        track.appendChild(setMark);
        timeline.appendChild(track);
    });

    document.getElementById("diffSunrise").textContent = `${Math.abs(riseDiff)} min â€¢ ${riseDiff<0 ? locA.name+" earlier" : locB.name+" earlier"}`;
    document.getElementById("diffSunset").textContent = `${Math.abs(setDiff)} min â€¢ ${setDiff>0 ? locA.name+" later" : locB.name+" later"}`;
    document.getElementById("diffLength").textContent = `${Math.abs(lenDiff)} min â€¢ ${lenDiff>0 ? locA.name+" longer day" : locB.name+" longer day"}`;
}

function setDate(which){
    const d = new Date();
    if(which==="tomorrow") d.setDate(d.getDate()+1);
    if(which==="yesterday") d.setDate(d.getDate()-1);
    document.getElementById("dateInput").value = d.toISOString().split("T")[0];
    update(d);
}

document.getElementById("dateInput").addEventListener("change", e=>{
    update(new Date(e.target.value+"T12:00:00"));
});

setDate("today");
</script>
</body>
</html>
